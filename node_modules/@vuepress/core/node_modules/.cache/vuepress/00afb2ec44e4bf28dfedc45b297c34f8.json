{"remainingRequest":"/Users/onlyone/open-github/technology-talk/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/onlyone/open-github/technology-talk/docs/.vuepress/components/PayArticle.vue?vue&type=style&index=0&id=cd8d2a86&lang=stylus&","dependencies":[{"path":"/Users/onlyone/open-github/technology-talk/docs/.vuepress/components/PayArticle.vue","mtime":1676857798581},{"path":"/Users/onlyone/open-github/technology-talk/node_modules/css-loader/dist/cjs.js","mtime":1676962415297},{"path":"/Users/onlyone/open-github/technology-talk/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1676962415807},{"path":"/Users/onlyone/open-github/technology-talk/node_modules/postcss-loader/src/index.js","mtime":1676962415295},{"path":"/Users/onlyone/open-github/technology-talk/node_modules/stylus-loader/index.js","mtime":1676962413960},{"path":"/Users/onlyone/open-github/technology-talk/node_modules/cache-loader/dist/cjs.js","mtime":1676962415098},{"path":"/Users/onlyone/open-github/technology-talk/node_modules/vue-loader/lib/index.js","mtime":1676962415466}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiNwYXktcmVhZC1tb3JlLWJ0biB7CiAgICBib3JkZXI6IG5vbmUgIWltcG9ydGFudDsKICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTsKICAgIGJhY2tncm91bmQ6ICMzZWFmN2MgIWltcG9ydGFudDsKfQoKI3BheS1yZWFkLW1vcmUtYnRuIHsKICAgIGNvbG9yOiAjZmZmICFpbXBvcnRhbnQ7CiAgICB0cmFuc2l0aW9uOiBhbGwgLjVzIGVhc2U7Cn0KCiNwYXktcmVhZC1tb3JlLWJ0bjpob3ZlciB7CiAgICBiYWNrZ3JvdW5kOiAjZGUzNjM2ICFpbXBvcnRhbnQ7Cn0KCi5sb2NrLXBheSB7CiAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgcGFkZGluZy1ib3R0b206IDMwcHg7Cn0K"},{"version":3,"sources":["PayArticle.vue"],"names":[],"mappings":";AA+GA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"PayArticle.vue","sourceRoot":"docs/.vuepress/components","sourcesContent":["<template>\n    <div class=\"pay-read-more-wrap\"\n         style=\"display: none; position: absolute; bottom: 0px; z-index: 9999; width: 100%; margin-top: -100px; font-family: PingFangSC-Regular, sans-serif;\">\n        <div id=\"pay-read-more-mask\"\n             style=\"position: relative; height: 200px; background: -webkit-gradient(linear, 0 0%, 0 100%, from(rgba(255, 255, 255, 0)), to(rgb(255, 255, 255)));\"></div>\n        <a id=\"pay-read-more-btn\" target=\"_blank\"\n           style=\"position: absolute; left: 50%; top: 70%; bottom: 30px; transform: translate(-50%, -50%); width: 160px; height: 36px; line-height: 36px; font-size: 15px; text-align: center; border: 1px solid rgb(222, 104, 109); color: rgb(222, 104, 109); background: rgb(255, 255, 255); cursor: pointer; border-radius: 6px;\">付费阅读</a>\n    </div>\n</template>\n\n<script>\n    export default {\n        name: 'PayArticle',\n        data() {\n            return {}\n        },\n        mounted: function () {\n\n            // 延迟执行\n            setTimeout(() => {\n                if (this.isPay()) {\n                    let $article = this.articleObj();\n                    this._detect($article, this);\n                }\n            }, 150);\n\n            // 定时任务\n            let interval = setInterval(() => {\n                if (this.isPay()) {\n                    let $article = this.articleObj();\n                    // if ($article && $article.article.hasClass(\"lock-pay\")){\n                    //     clearInterval(interval);\n                    // }\n                    this._detect($article, this);\n                }\n            }, 1000);\n        },\n        methods: {\n            isPay() {\n                return this.$page.frontmatter.pay;\n            },\n            articleObj: function () {\n                let $article = $('.theme-default-content');\n                if ($article.length <= 0) return null;\n\n                // 文章的实际高度\n                let height = $article[0].clientHeight;\n\n                return {\n                    article: $article,\n                    height: height\n                }\n            },\n            _detect: function (articleObj, t) {\n                if (null == articleObj) return;\n\n                let $article = articleObj.article;\n                let height = articleObj.height;\n                if ($article.length <= 0) return;\n\n                // 文章隐藏后的高度\n                let halfHeight = height * 0.9;\n\n                // 判断是否已加锁\n                if ($article.hasClass(\"lock-pay\")) {\n                    return;\n                }\n\n                // 设置文章可显示高度\n                $article.css({\"height\": halfHeight + 'px'});\n                $article.addClass('lock-pay');\n\n                // 删除原有标签\n                $article.remove(\"#pay-read-more-wrap\");\n\n                // 添加加锁标签\n                let clone = $('.pay-read-more-wrap').clone();\n                clone.attr('id', 'pay-read-more-wrap');\n                clone.css('display', 'block');\n\n                // 按钮跳转付费\n                clone.find(\"#pay-read-more-btn\").attr(\"href\", this.$page.frontmatter.pay);\n\n                $article.append(clone);\n            }\n        }\n    }\n</script>\n\n<style lang=\"stylus\">\n    #pay-read-more-btn {\n        border: none !important;\n        text-decoration: none;\n        background: #3eaf7c !important;\n    }\n\n    #pay-read-more-btn {\n        color: #fff !important;\n        transition: all .5s ease;\n    }\n\n    #pay-read-more-btn:hover {\n        background: #de3636 !important;\n    }\n\n    .lock-pay {\n        position: relative;\n        overflow: hidden;\n        padding-bottom: 30px;\n    }\n</style>"]}]}