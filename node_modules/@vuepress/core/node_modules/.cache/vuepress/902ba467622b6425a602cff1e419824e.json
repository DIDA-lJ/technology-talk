{"remainingRequest":"/Users/onlyone/open-github/technology-talk/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/onlyone/open-github/technology-talk/docs/.vuepress/components/PayArticle.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/onlyone/open-github/technology-talk/docs/.vuepress/components/PayArticle.vue","mtime":1676857798581},{"path":"/Users/onlyone/open-github/technology-talk/node_modules/cache-loader/dist/cjs.js","mtime":1676962415098},{"path":"/Users/onlyone/open-github/technology-talk/node_modules/babel-loader/lib/index.js","mtime":1676962415297},{"path":"/Users/onlyone/open-github/technology-talk/node_modules/cache-loader/dist/cjs.js","mtime":1676962415098},{"path":"/Users/onlyone/open-github/technology-talk/node_modules/vue-loader/lib/index.js","mtime":1676962415466}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgICBleHBvcnQgZGVmYXVsdCB7CiAgICAgICAgbmFtZTogJ1BheUFydGljbGUnLAogICAgICAgIGRhdGEoKSB7CiAgICAgICAgICAgIHJldHVybiB7fQogICAgICAgIH0sCiAgICAgICAgbW91bnRlZDogZnVuY3Rpb24gKCkgewoKICAgICAgICAgICAgLy8g5bu26L+f5omn6KGMCiAgICAgICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNQYXkoKSkgewogICAgICAgICAgICAgICAgICAgIGxldCAkYXJ0aWNsZSA9IHRoaXMuYXJ0aWNsZU9iaigpOwogICAgICAgICAgICAgICAgICAgIHRoaXMuX2RldGVjdCgkYXJ0aWNsZSwgdGhpcyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIDE1MCk7CgogICAgICAgICAgICAvLyDlrprml7bku7vliqEKICAgICAgICAgICAgbGV0IGludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNQYXkoKSkgewogICAgICAgICAgICAgICAgICAgIGxldCAkYXJ0aWNsZSA9IHRoaXMuYXJ0aWNsZU9iaigpOwogICAgICAgICAgICAgICAgICAgIC8vIGlmICgkYXJ0aWNsZSAmJiAkYXJ0aWNsZS5hcnRpY2xlLmhhc0NsYXNzKCJsb2NrLXBheSIpKXsKICAgICAgICAgICAgICAgICAgICAvLyAgICAgY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7CiAgICAgICAgICAgICAgICAgICAgLy8gfQogICAgICAgICAgICAgICAgICAgIHRoaXMuX2RldGVjdCgkYXJ0aWNsZSwgdGhpcyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIDEwMDApOwogICAgICAgIH0sCiAgICAgICAgbWV0aG9kczogewogICAgICAgICAgICBpc1BheSgpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLiRwYWdlLmZyb250bWF0dGVyLnBheTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYXJ0aWNsZU9iajogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgbGV0ICRhcnRpY2xlID0gJCgnLnRoZW1lLWRlZmF1bHQtY29udGVudCcpOwogICAgICAgICAgICAgICAgaWYgKCRhcnRpY2xlLmxlbmd0aCA8PSAwKSByZXR1cm4gbnVsbDsKCiAgICAgICAgICAgICAgICAvLyDmlofnq6DnmoTlrp7pmYXpq5jluqYKICAgICAgICAgICAgICAgIGxldCBoZWlnaHQgPSAkYXJ0aWNsZVswXS5jbGllbnRIZWlnaHQ7CgogICAgICAgICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgICAgICAgICBhcnRpY2xlOiAkYXJ0aWNsZSwKICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IGhlaWdodAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICBfZGV0ZWN0OiBmdW5jdGlvbiAoYXJ0aWNsZU9iaiwgdCkgewogICAgICAgICAgICAgICAgaWYgKG51bGwgPT0gYXJ0aWNsZU9iaikgcmV0dXJuOwoKICAgICAgICAgICAgICAgIGxldCAkYXJ0aWNsZSA9IGFydGljbGVPYmouYXJ0aWNsZTsKICAgICAgICAgICAgICAgIGxldCBoZWlnaHQgPSBhcnRpY2xlT2JqLmhlaWdodDsKICAgICAgICAgICAgICAgIGlmICgkYXJ0aWNsZS5sZW5ndGggPD0gMCkgcmV0dXJuOwoKICAgICAgICAgICAgICAgIC8vIOaWh+eroOmakOiXj+WQjueahOmrmOW6pgogICAgICAgICAgICAgICAgbGV0IGhhbGZIZWlnaHQgPSBoZWlnaHQgKiAwLjk7CgogICAgICAgICAgICAgICAgLy8g5Yik5pat5piv5ZCm5bey5Yqg6ZSBCiAgICAgICAgICAgICAgICBpZiAoJGFydGljbGUuaGFzQ2xhc3MoImxvY2stcGF5IikpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8g6K6+572u5paH56ug5Y+v5pi+56S66auY5bqmCiAgICAgICAgICAgICAgICAkYXJ0aWNsZS5jc3MoeyJoZWlnaHQiOiBoYWxmSGVpZ2h0ICsgJ3B4J30pOwogICAgICAgICAgICAgICAgJGFydGljbGUuYWRkQ2xhc3MoJ2xvY2stcGF5Jyk7CgogICAgICAgICAgICAgICAgLy8g5Yig6Zmk5Y6f5pyJ5qCH562+CiAgICAgICAgICAgICAgICAkYXJ0aWNsZS5yZW1vdmUoIiNwYXktcmVhZC1tb3JlLXdyYXAiKTsKCiAgICAgICAgICAgICAgICAvLyDmt7vliqDliqDplIHmoIfnrb4KICAgICAgICAgICAgICAgIGxldCBjbG9uZSA9ICQoJy5wYXktcmVhZC1tb3JlLXdyYXAnKS5jbG9uZSgpOwogICAgICAgICAgICAgICAgY2xvbmUuYXR0cignaWQnLCAncGF5LXJlYWQtbW9yZS13cmFwJyk7CiAgICAgICAgICAgICAgICBjbG9uZS5jc3MoJ2Rpc3BsYXknLCAnYmxvY2snKTsKCiAgICAgICAgICAgICAgICAvLyDmjInpkq7ot7Povazku5jotLkKICAgICAgICAgICAgICAgIGNsb25lLmZpbmQoIiNwYXktcmVhZC1tb3JlLWJ0biIpLmF0dHIoImhyZWYiLCB0aGlzLiRwYWdlLmZyb250bWF0dGVyLnBheSk7CgogICAgICAgICAgICAgICAgJGFydGljbGUuYXBwZW5kKGNsb25lKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgIH0K"},{"version":3,"sources":["PayArticle.vue"],"names":[],"mappings":";AAWA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA","file":"PayArticle.vue","sourceRoot":"docs/.vuepress/components","sourcesContent":["<template>\n    <div class=\"pay-read-more-wrap\"\n         style=\"display: none; position: absolute; bottom: 0px; z-index: 9999; width: 100%; margin-top: -100px; font-family: PingFangSC-Regular, sans-serif;\">\n        <div id=\"pay-read-more-mask\"\n             style=\"position: relative; height: 200px; background: -webkit-gradient(linear, 0 0%, 0 100%, from(rgba(255, 255, 255, 0)), to(rgb(255, 255, 255)));\"></div>\n        <a id=\"pay-read-more-btn\" target=\"_blank\"\n           style=\"position: absolute; left: 50%; top: 70%; bottom: 30px; transform: translate(-50%, -50%); width: 160px; height: 36px; line-height: 36px; font-size: 15px; text-align: center; border: 1px solid rgb(222, 104, 109); color: rgb(222, 104, 109); background: rgb(255, 255, 255); cursor: pointer; border-radius: 6px;\">付费阅读</a>\n    </div>\n</template>\n\n<script>\n    export default {\n        name: 'PayArticle',\n        data() {\n            return {}\n        },\n        mounted: function () {\n\n            // 延迟执行\n            setTimeout(() => {\n                if (this.isPay()) {\n                    let $article = this.articleObj();\n                    this._detect($article, this);\n                }\n            }, 150);\n\n            // 定时任务\n            let interval = setInterval(() => {\n                if (this.isPay()) {\n                    let $article = this.articleObj();\n                    // if ($article && $article.article.hasClass(\"lock-pay\")){\n                    //     clearInterval(interval);\n                    // }\n                    this._detect($article, this);\n                }\n            }, 1000);\n        },\n        methods: {\n            isPay() {\n                return this.$page.frontmatter.pay;\n            },\n            articleObj: function () {\n                let $article = $('.theme-default-content');\n                if ($article.length <= 0) return null;\n\n                // 文章的实际高度\n                let height = $article[0].clientHeight;\n\n                return {\n                    article: $article,\n                    height: height\n                }\n            },\n            _detect: function (articleObj, t) {\n                if (null == articleObj) return;\n\n                let $article = articleObj.article;\n                let height = articleObj.height;\n                if ($article.length <= 0) return;\n\n                // 文章隐藏后的高度\n                let halfHeight = height * 0.9;\n\n                // 判断是否已加锁\n                if ($article.hasClass(\"lock-pay\")) {\n                    return;\n                }\n\n                // 设置文章可显示高度\n                $article.css({\"height\": halfHeight + 'px'});\n                $article.addClass('lock-pay');\n\n                // 删除原有标签\n                $article.remove(\"#pay-read-more-wrap\");\n\n                // 添加加锁标签\n                let clone = $('.pay-read-more-wrap').clone();\n                clone.attr('id', 'pay-read-more-wrap');\n                clone.css('display', 'block');\n\n                // 按钮跳转付费\n                clone.find(\"#pay-read-more-btn\").attr(\"href\", this.$page.frontmatter.pay);\n\n                $article.append(clone);\n            }\n        }\n    }\n</script>\n\n<style lang=\"stylus\">\n    #pay-read-more-btn {\n        border: none !important;\n        text-decoration: none;\n        background: #3eaf7c !important;\n    }\n\n    #pay-read-more-btn {\n        color: #fff !important;\n        transition: all .5s ease;\n    }\n\n    #pay-read-more-btn:hover {\n        background: #de3636 !important;\n    }\n\n    .lock-pay {\n        position: relative;\n        overflow: hidden;\n        padding-bottom: 30px;\n    }\n</style>"]}]}